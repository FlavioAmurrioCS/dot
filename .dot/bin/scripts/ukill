#!/usr/bin/env bash
# shellcheck disable=SC2009

# shellcheck source=../scripts/__script_utilities.sh
SCRIPT_HOME="$(dirname "$(cd "$(dirname "${0}")" >/dev/null 2>&1 && pwd -P)")/scripts" &&
  [ -f "${SCRIPT_HOME}/__script_utilities.sh" ] &&
  source "${SCRIPT_HOME}/__script_utilities.sh"

function ukill() {
  help_arg_count_usage 1 "${FUNCNAME[0]:-port} <process_string>" "$@" && return 0
  local pstring="${1}"
  ps aux | grep "^${USER:0:7}" | grep -v -e grep -e "${FUNCNAME[0]}" | grep "${pstring}"
  [ "${2}" = "-k" ] && ps aux | grep "^${USER:0:7}" | grep -v -e grep -e "${FUNCNAME[0]}" | grep "${pstring}" | awk '{print $2}' | xargs kill
}

ukill "${@}"
